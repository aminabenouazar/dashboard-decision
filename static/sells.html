<!-- templates/sells.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Ajouter une Vente - Graines de Chocolat</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
      padding: 40px;
      text-align: center;
    }

    form {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      max-width: 400px;
      margin: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    input, select, button {
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #8B4513;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #A0522D;
    }

    h2 {
      color: #8B4513;
    }

    table {
      margin: 40px auto;
      width: 90%;
      border-collapse: collapse;
      background-color: #fff;
    }

    th, td {
      padding: 12px;
      border: 1px solid #ccc;
    }

    th {
      background-color: #8B4513;
      color: white;
    }
  </style>
</head>
<body>

  <h2>üõí Ajouter une vente</h2>

  <form id="sellsForm">
    <input type="text" placeholder="Nom du client" name="client_name" required>

    <select name="product" required>
      <option value="">-- S√©lectionner un produit --</option>
      <option>Classique Coffee</option>
      <option>Praline cisette</option>
      <option>Caramande</option>
      <option>Napolitain noir √âquateur</option>
      <option>Bali (gingembre confit dans une coque noir)</option>
      <option>Divin (pralin√© intense dans une coque en chocolat au lait)</option>
      <option>R√©glisse enrob√©e</option>
      <option>C≈ìur rouge (pralin√© pur puissant et fondant)</option>
      <option>Amande caram√©lis√©e au chocolat noir et au lait</option>
      <option>Coco croquant</option>
      <option>D√©lice</option>
      <option>Love (ganache speculoos)</option>
      <option>Intense (nougatine pistache)</option>
      <option>Le Rocher pralin√© gourmand √† la ganache am√®re</option>
      <option>Amande caram√©lis√©e au chocolat</option>
      <option>Le Rocher pralin√©</option>
      <option>Paradis riz souffl√© et amandes</option>
      <option>Paris Brest</option>
      <option>Amande caramel d'Isigny et fleur de sel</option>
      <option>Passion (nougatine pistache, cr√™pe dentelle)</option>
      <option>Tiramisu (ganache onctueuse saveur caf√©in√©e)</option>
      <option>Feuille d'automne</option>
      <option>L‚ÄôAmer (chocolat 75% cacao)</option>
      <option>Buchette pralin√© croquant aux amandes valenciennes</option>
      <option>L‚ÄôInsolite nougatine (enrob√©e de chocolat, √©clats d‚Äôamandes caram√©lis√©es)</option>
      <option>√âcorces d'orange</option>
      <option>Le Meringu√© (ganache citron, √©clats de meringue)</option>
      <option>Le Palet (ganache noir saveur cappuccino)</option>
      <option>Gingembre enrob√©</option>
      <option>Plaisir pralin√© gourmand amandes Valencia</option>
      <option>Praline noisettes</option>
      <option>Le Rocher pralin√© gourmand dans une coque en chocolat noir</option>
      <option>Grains de caf√© noir</option>
      <option>Le Fruit√© (chocolat noir aux √©clats de framboises)</option>
      <option>Le Noble</option>
      <option>Classique Coconut</option>
      <option>Pistachio</option>
      <option>Calisson</option>
      <option>Le Rocher pralin√© gourmand orn√© de noisettes</option>
      <option>Paradis (noisette gianduja)</option>
      <option>Napolitain au lait et caramel</option>
      <option>Divin pralin√© intense dans une coque noire</option>
      <option>L‚ÄôOrientale (nougatine aux s√©sames)</option>
      <option>Savoureux</option>
    </select>

    <input type="date" name="date" required>
    <input type="number" placeholder="Montant en DH" name="amount_in_dh" required>
    <input type="number" placeholder="Nombre de bo√Ætes exp√©di√©es" name="boxes_shipped" required>
    <button type="submit">‚ûï Ajouter</button>
  </form>

  <h2>üìã Historique des ventes</h2>
  <table id="salesTable">
    <thead>
      <tr>
        <th>Client</th>
        <th>Produit</th>
        <th>Date</th>
        <th>Montant (DH)</th>
        <th>Bo√Ætes exp√©di√©es</th>
      </tr>
    </thead>
    <tbody>
      <!-- Ventes ajout√©es appara√Ætront ici -->
    </tbody>
  </table>

  <script>
    document.getElementById("sellsForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const formData = new FormData(this);
      const data = Object.fromEntries(formData.entries());

      data.amount_in_dh = parseFloat(data.amount_in_dh);
      data.boxes_shipped = parseInt(data.boxes_shipped);

      fetch("/add-sell", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(result => {
        if (result.success) {
          alert("‚úÖ Vente ajout√©e !");
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${data.client_name}</td>
            <td>${data.product}</td>
            <td>${data.date}</td>
            <td>${data.amount_in_dh}</td>
            <td>${data.boxes_shipped}</td>
          `;
          document.querySelector("#salesTable tbody").appendChild(row);
          this.reset();
        } else {
          alert("‚ùå Erreur : " + result.message);
        }
      })
      .catch(error => {
        alert("‚ùå Erreur r√©seau : " + error);
      });
    });
  </script>

</body>
</html>
